(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-893baf1a"],{"2a44":function(t,e,a){"use strict";a("aac0")},"44c5":function(t,e,a){"use strict";a("b082")},"4e7c":function(t,e,a){"use strict";a("99bb")},"5ebb":function(t,e,a){},"99ac":function(t,e,a){},"99bb":function(t,e,a){},"9bd0":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,i){return a("div",{key:i,staticClass:"tab-control-item",class:{active:i===t.currentIndex},on:{click:function(e){return t.itemClick(i)}}},[a("span",[t._v(t._s(e))])])})),0)},r=[],s={props:{titles:{type:Array,default(){return[]}}},data(){return{currentIndex:0}},methods:{itemClick(t){this.currentIndex=t,this.$emit("tabIndex",t)}}},n=s,c=(a("4e7c"),a("2877")),o=Object(c["a"])(n,i,r,!1,null,null,null);e["a"]=o.exports},a92a:function(t,e,a){"use strict";a("99ac")},aac0:function(t,e,a){},b082:function(t,e,a){},bb51:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"category"}},[a("nav-bar",{staticClass:"navbar"},[a("div",{attrs:{slot:"center"},slot:"center"},[t._v("商品分类")])]),a("div",{staticClass:"content"},[a("tab-menu",{attrs:{categories:t.categories},on:{itemClick:t.categoryClick}}),a("scroll",{attrs:{id:"tab-content"}},[a("div",[a("tab-content-category",{attrs:{subcategories:t.thisSubCategories}}),a("tab-control",{attrs:{titles:["综合","新品","销量"]},on:{tabIndex:t.titleClick}}),a("tab-content-detail",{attrs:{categoryDetail:t.thisCategoriesDetail}})],1)])],1)],1)},r=[],s=a("a7ac"),n=a("5d17"),c=a("9bd0"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("scroll",{attrs:{id:"tab-menu"}},[a("div",{staticClass:"menu-list"},t._l(t.categories,(function(e,i){return a("div",{key:i,staticClass:"menu-list-item",class:{active:i===t.currentIndex},on:{click:function(e){return t.itemClick(i)}}},[t._v(" "+t._s(e.title)+" ")])})),0)])},l=[],u={name:"TabMenu",components:{Scroll:n["a"]},props:{categories:Array},data(){return{currentIndex:0}},methods:{itemClick(t){this.currentIndex=t,this.$emit("itemClick",t)}}},g=u,d=(a("dd79"),a("2877")),b=Object(d["a"])(g,o,l,!1,null,"3d8cb136",null),h=b.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.subcategories.list?a("grid-view",{attrs:{cols:3,"line-space":30,"v-margin":20}},t._l(t.subcategories.list,(function(e,i){return a("div",{key:i,staticClass:"item"},[a("a",{attrs:{href:e.link}},[a("img",{staticClass:"item-img",attrs:{src:e.image,alt:""}}),a("div",{staticClass:"item-title"},[t._v(t._s(e.title))])])])})),0):t._e()],1)},p=[],y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"gridView",staticClass:"grid-view"},[t._t("default")],2)},f=[],C={name:"GridView",props:{cols:{type:Number,default:2},hMargin:{type:Number,default:8},vMargin:{type:Number,default:8},itemSpace:{type:Number,default:8},lineSpace:{type:Number,default:8}},mounted(){setTimeout(this._autoLayout,20)},updated(){this._autoLayout()},methods:{_autoLayout(){let t=this.$refs.gridView,e=t.children;t.style.padding=`${this.vMargin}px ${this.hMargin}px`;let a=(t.clientWidth-2*this.hMargin-(this.cols-1)*this.itemSpace)/this.cols;for(let i=0;i<e.length;i++){let t=e[i];t.style.width=a+"px",(i+1)%this.cols!==0&&(t.style.marginRight=this.itemSpace+"px"),i>=this.cols&&(t.style.marginTop=this.lineSpace+"px")}}}},v=C,_=(a("2a44"),Object(d["a"])(v,y,f,!1,null,"4c99bbf1",null)),x=_.exports,k={name:"TabContentCategory",components:{GridView:x},props:{subcategories:{type:Object,default(){return[]}}}},D=k,w=(a("a92a"),Object(d["a"])(D,m,p,!1,null,"ba1d359a",null)),I=w.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("grid-view",t._l(t.categoryDetail,(function(t,e){return a("goods-list-item",{key:e,attrs:{goodsItem:t}})})),1)},T=[],$=a("9977"),j={name:"TabContentDetail",components:{GridView:x,GoodsListItem:$["a"]},props:{categoryDetail:{type:Array,default(){return[]}}}},O=j,M=Object(d["a"])(O,S,T,!1,null,"780c8e3b",null),E=M.exports,N=a("1bab");function V(){return Object(N["a"])({url:"/category"})}function G(t){return Object(N["a"])({url:"/subcategory",params:{maitKey:t}})}function L(t,e){return Object(N["a"])({url:"/subcategory/detail",params:{miniWallkey:t,type:e}})}const A="pop",W="new",J="sell";var K={name:"Category",components:{NavBar:s["a"],TabMenu:h,Scroll:n["a"],TabContentCategory:I,TabControl:c["a"],TabContentDetail:E},data(){return{categories:[],categoriesData:[],currentIndex:0,thisSubCategories:{},currentType:"",thisCategoriesDetail:[]}},created(){this._getCategory()},methods:{_getCategory(){V().then(t=>{this.categories=t.data.category.list;for(let e=0;e<this.categories.length;e++)this.categoriesData[e]={subCategories:[],categoryDetail:{pop:[],new:[],sell:[]}};this._getSubCategories(0)})},async _getSubCategories(t){this.currentIndex=t;const e=this.categories[t].maitKey;await G(e).then(e=>{this.categoriesData[t].subCategories=e.data,this._getCategoryDetail(A)}),this.thisSubCategories=this.categoriesData[this.currentIndex].subCategories},async _getCategoryDetail(t){this.currentType=t;const e=this.categories[this.currentIndex].miniWallkey;await L(e,t).then(e=>{this.categoriesData[this.currentIndex].categoryDetail[t]=e}),this.thisCategoriesDetail=this.categoriesData[this.currentIndex].categoryDetail[this.currentType]},categoryClick(t){this._getSubCategories(t)},titleClick(t){this._getCategoryDetail([A,W,J][t])}}},B=K,R=(a("44c5"),Object(d["a"])(B,i,r,!1,null,"4fe43de6",null));e["default"]=R.exports},dd79:function(t,e,a){"use strict";a("5ebb")}}]);
//# sourceMappingURL=chunk-893baf1a.1245467f.js.map